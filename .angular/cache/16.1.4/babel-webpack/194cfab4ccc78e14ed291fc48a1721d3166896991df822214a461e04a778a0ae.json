{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/storage.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction AddPaymentComponent_p_8_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 15);\n    i0.ɵɵtext(1, \"Name is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddPaymentComponent_p_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtemplate(1, AddPaymentComponent_p_8_span_1_Template, 2, 0, \"span\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r1 = i0.ɵɵreference(7);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r1.errors.required);\n  }\n}\nfunction AddPaymentComponent_p_14_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 15);\n    i0.ɵɵtext(1, \"Card number is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddPaymentComponent_p_14_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 15);\n    i0.ɵɵtext(1, \"Card number must be at least 13 digits\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddPaymentComponent_p_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtemplate(1, AddPaymentComponent_p_14_span_1_Template, 2, 0, \"span\", 14);\n    i0.ɵɵtemplate(2, AddPaymentComponent_p_14_span_2_Template, 2, 0, \"span\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r3 = i0.ɵɵreference(13);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r3.errors.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r3.errors.minlength);\n  }\n}\nfunction AddPaymentComponent_p_20_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 15);\n    i0.ɵɵtext(1, \"CVC is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddPaymentComponent_p_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtemplate(1, AddPaymentComponent_p_20_span_1_Template, 2, 0, \"span\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r5 = i0.ɵɵreference(19);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r5.errors.required);\n  }\n}\nfunction AddPaymentComponent_p_26_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 15);\n    i0.ɵɵtext(1, \"Expiration date is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddPaymentComponent_p_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtemplate(1, AddPaymentComponent_p_26_span_1_Template, 2, 0, \"span\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r7 = i0.ɵɵreference(25);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r7.errors.required);\n  }\n}\nfunction AddPaymentComponent_p_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 16);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r9.successMessage);\n  }\n}\nexport let AddPaymentComponent = /*#__PURE__*/(() => {\n  class AddPaymentComponent {\n    constructor(storage) {\n      this.storage = storage;\n      this.paymentAdded = new EventEmitter();\n      this.newPaymentForm = {\n        name: '',\n        card: '',\n        date: '',\n        cvc: ''\n      };\n      this.successMessage = '';\n    }\n    addPayment() {\n      const payments = this.getPayments();\n      const maskedPayment = {\n        ...this.newPaymentForm,\n        card: this.maskCardNumber(this.newPaymentForm.card)\n      };\n      payments.push(maskedPayment);\n      this.storage.setItem('payments', JSON.stringify(payments));\n      this.successMessage = 'Payment method added successfully!';\n      this.paymentAdded.emit(this.newPaymentForm);\n      this.newPaymentForm = {\n        name: '',\n        card: '',\n        date: '',\n        cvc: ''\n      };\n      setTimeout(() => {\n        this.successMessage = '';\n      }, 3000);\n    }\n    getPayments() {\n      const paymentsJson = this.storage.getItem('payments');\n      return paymentsJson ? JSON.parse(paymentsJson) : [];\n    }\n    maskCardNumber(card) {\n      if (card.length < 4) return card;\n      return '*'.repeat(card.length - 4) + card.slice(-4);\n    }\n  }\n  AddPaymentComponent.ɵfac = function AddPaymentComponent_Factory(t) {\n    return new (t || AddPaymentComponent)(i0.ɵɵdirectiveInject(i1.StorageService));\n  };\n  AddPaymentComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AddPaymentComponent,\n    selectors: [[\"foodorb-add-payment\"]],\n    outputs: {\n      paymentAdded: \"paymentAdded\"\n    },\n    decls: 31,\n    vars: 10,\n    consts: [[3, \"ngSubmit\"], [\"paymentForm\", \"ngForm\"], [\"for\", \"\"], [\"required\", \"\", \"type\", \"text\", \"name\", \"name\", 3, \"ngModel\", \"ngModelChange\"], [\"name\", \"ngModel\"], [4, \"ngIf\"], [\"required\", \"\", \"type\", \"text\", \"name\", \"card\", \"minlength\", \"13\", \"maxlength\", \"19\", 3, \"ngModel\", \"ngModelChange\"], [\"card\", \"ngModel\"], [\"required\", \"\", \"type\", \"text\", \"name\", \"cvc\", \"minlength\", \"3\", \"maxlength\", \"4\", 3, \"ngModel\", \"ngModelChange\"], [\"cvc\", \"ngModel\"], [\"required\", \"\", \"type\", \"text\", \"name\", \"date\", \"placeholder\", \"MM/YY\", 3, \"ngModel\", \"ngModelChange\"], [\"date\", \"ngModel\"], [\"class\", \"success\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"btn-primary\", 3, \"disabled\"], [\"class\", \"required\", 4, \"ngIf\"], [1, \"required\"], [1, \"success\"]],\n    template: function AddPaymentComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"h3\");\n        i0.ɵɵtext(1, \"Add a Payment\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"form\", 0, 1);\n        i0.ɵɵlistener(\"ngSubmit\", function AddPaymentComponent_Template_form_ngSubmit_2_listener() {\n          return ctx.addPayment();\n        });\n        i0.ɵɵelementStart(4, \"label\", 2);\n        i0.ɵɵtext(5, \"Name on Card \");\n        i0.ɵɵelementStart(6, \"input\", 3, 4);\n        i0.ɵɵlistener(\"ngModelChange\", function AddPaymentComponent_Template_input_ngModelChange_6_listener($event) {\n          return ctx.newPaymentForm.name = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(8, AddPaymentComponent_p_8_Template, 2, 1, \"p\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(9, \"br\");\n        i0.ɵɵelementStart(10, \"label\", 2);\n        i0.ɵɵtext(11, \"Card Number \");\n        i0.ɵɵelementStart(12, \"input\", 6, 7);\n        i0.ɵɵlistener(\"ngModelChange\", function AddPaymentComponent_Template_input_ngModelChange_12_listener($event) {\n          return ctx.newPaymentForm.card = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(14, AddPaymentComponent_p_14_Template, 3, 2, \"p\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(15, \"br\");\n        i0.ɵɵelementStart(16, \"label\", 2);\n        i0.ɵɵtext(17, \"CVC \");\n        i0.ɵɵelementStart(18, \"input\", 8, 9);\n        i0.ɵɵlistener(\"ngModelChange\", function AddPaymentComponent_Template_input_ngModelChange_18_listener($event) {\n          return ctx.newPaymentForm.cvc = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(20, AddPaymentComponent_p_20_Template, 2, 1, \"p\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(21, \"br\");\n        i0.ɵɵelementStart(22, \"label\", 2);\n        i0.ɵɵtext(23, \"Expiration Date \");\n        i0.ɵɵelementStart(24, \"input\", 10, 11);\n        i0.ɵɵlistener(\"ngModelChange\", function AddPaymentComponent_Template_input_ngModelChange_24_listener($event) {\n          return ctx.newPaymentForm.date = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(26, AddPaymentComponent_p_26_Template, 2, 1, \"p\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(27, \"br\");\n        i0.ɵɵtemplate(28, AddPaymentComponent_p_28_Template, 2, 1, \"p\", 12);\n        i0.ɵɵelementStart(29, \"button\", 13);\n        i0.ɵɵtext(30, \"Add Payment\");\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(3);\n        const _r1 = i0.ɵɵreference(7);\n        const _r3 = i0.ɵɵreference(13);\n        const _r5 = i0.ɵɵreference(19);\n        const _r7 = i0.ɵɵreference(25);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.newPaymentForm.name);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", _r1.errors && _r1.touched);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.newPaymentForm.card);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", _r3.errors && _r3.touched);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.newPaymentForm.cvc);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", _r5.errors && _r5.touched);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.newPaymentForm.date);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", _r7.errors && _r7.touched);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.successMessage);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"disabled\", _r0.invalid);\n      }\n    },\n    dependencies: [i2.NgIf, i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.MinLengthValidator, i3.MaxLengthValidator, i3.NgModel, i3.NgForm]\n  });\n  return AddPaymentComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}