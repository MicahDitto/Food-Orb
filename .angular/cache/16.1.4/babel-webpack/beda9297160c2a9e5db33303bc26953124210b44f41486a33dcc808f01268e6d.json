{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/user-profile.service\";\nimport * as i2 from \"src/app/services/storage.service\";\nimport * as i3 from \"../../components/address-list/address-list.component\";\nimport * as i4 from \"../../components/add-address/add-address.component\";\nimport * as i5 from \"../../components/payments/payments.component\";\nimport * as i6 from \"../../components/add-payment/add-payment.component\";\nexport let SettingsComponent = /*#__PURE__*/(() => {\n  class SettingsComponent {\n    constructor(userProfileService, storage) {\n      this.userProfileService = userProfileService;\n      this.storage = storage;\n      // Tab management\n      this.activeTab = 'profile';\n      // Profile\n      this.profile = {\n        name: '',\n        email: '',\n        phone: ''\n      };\n      this.profileMessage = '';\n      this.profileMessageType = 'success';\n      // Addresses\n      this.addresses = [];\n      this.showAddAddress = false;\n      this.editingAddressIndex = null;\n      this.newAddress = {\n        name: '',\n        address: '',\n        city: '',\n        state: '',\n        zip: ''\n      };\n      // Payments\n      this.payments = [];\n      this.showAddPayment = false;\n      this.newPayment = {\n        name: '',\n        card: '',\n        date: '',\n        cvc: ''\n      };\n    }\n    ngOnInit() {\n      this.loadProfile();\n      this.loadAddresses();\n      this.loadPayments();\n    }\n    // Tab switching\n    setActiveTab(tab) {\n      this.activeTab = tab;\n    }\n    // Profile methods\n    loadProfile() {\n      const savedProfile = this.userProfileService.getProfile();\n      if (savedProfile) {\n        this.profile = savedProfile;\n      } else {\n        // Try to get email from token\n        const email = this.userProfileService.getEmailFromToken();\n        if (email) {\n          this.profile.email = email;\n        }\n      }\n    }\n    saveProfile() {\n      if (!this.profile.name || !this.profile.email) {\n        this.showProfileMessage('Name and email are required', 'error');\n        return;\n      }\n      this.userProfileService.saveProfile(this.profile);\n      this.showProfileMessage('Profile saved successfully!', 'success');\n    }\n    showProfileMessage(message, type) {\n      this.profileMessage = message;\n      this.profileMessageType = type;\n      setTimeout(() => this.profileMessage = '', 3000);\n    }\n    // Address methods\n    loadAddresses() {\n      this.addresses = this.userProfileService.getAddresses();\n    }\n    toggleAddAddress() {\n      this.showAddAddress = !this.showAddAddress;\n      if (this.showAddAddress) {\n        this.editingAddressIndex = null;\n        this.newAddress = {\n          name: '',\n          address: '',\n          city: '',\n          state: '',\n          zip: ''\n        };\n      }\n    }\n    editAddress(index) {\n      this.editingAddressIndex = index;\n      this.newAddress = {\n        ...this.addresses[index]\n      };\n      this.showAddAddress = true;\n    }\n    saveAddress() {\n      if (!this.newAddress.name || !this.newAddress.address || !this.newAddress.city || !this.newAddress.state || !this.newAddress.zip) {\n        return;\n      }\n      if (this.editingAddressIndex !== null) {\n        this.userProfileService.updateAddress(this.editingAddressIndex, this.newAddress);\n      } else {\n        this.userProfileService.addAddress(this.newAddress);\n      }\n      this.loadAddresses();\n      this.showAddAddress = false;\n      this.editingAddressIndex = null;\n      this.newAddress = {\n        name: '',\n        address: '',\n        city: '',\n        state: '',\n        zip: ''\n      };\n    }\n    removeAddress(index) {\n      if (confirm('Are you sure you want to remove this address?')) {\n        this.userProfileService.removeAddress(index);\n        this.loadAddresses();\n      }\n    }\n    cancelAddressEdit() {\n      this.showAddAddress = false;\n      this.editingAddressIndex = null;\n      this.newAddress = {\n        name: '',\n        address: '',\n        city: '',\n        state: '',\n        zip: ''\n      };\n    }\n    // Payment methods\n    loadPayments() {\n      this.payments = this.userProfileService.getPayments();\n    }\n    toggleAddPayment() {\n      this.showAddPayment = !this.showAddPayment;\n      if (this.showAddPayment) {\n        this.newPayment = {\n          name: '',\n          card: '',\n          date: '',\n          cvc: ''\n        };\n      }\n    }\n    savePayment() {\n      if (!this.newPayment.name || !this.newPayment.card || !this.newPayment.date) {\n        return;\n      }\n      this.userProfileService.addPayment({\n        name: this.newPayment.name,\n        card: this.newPayment.card,\n        date: this.newPayment.date\n      });\n      this.loadPayments();\n      this.showAddPayment = false;\n      this.newPayment = {\n        name: '',\n        card: '',\n        date: '',\n        cvc: ''\n      };\n    }\n    removePayment(index) {\n      if (confirm('Are you sure you want to remove this payment method?')) {\n        this.userProfileService.removePayment(index);\n        this.loadPayments();\n      }\n    }\n    cancelPaymentAdd() {\n      this.showAddPayment = false;\n      this.newPayment = {\n        name: '',\n        card: '',\n        date: '',\n        cvc: ''\n      };\n    }\n    get isLoggedIn() {\n      return this.storage.isAuthenticated();\n    }\n  }\n  SettingsComponent.ɵfac = function SettingsComponent_Factory(t) {\n    return new (t || SettingsComponent)(i0.ɵɵdirectiveInject(i1.UserProfileService), i0.ɵɵdirectiveInject(i2.StorageService));\n  };\n  SettingsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SettingsComponent,\n    selectors: [[\"foodorb-settings\"]],\n    decls: 40,\n    vars: 0,\n    consts: [[1, \"d-flex\", \"margin\", \"justify-content-center\"], [1, \"side-padding\", \"card\"], [1, \"card-header\", \"side-padding\"], [1, \"padding\", \"card-body\"], [\"data-toggle\", \"collapse\", \"data-target\", \"#payment\", 1, \"btn-primary\", \"slight-margin\"], [\"id\", \"payment\", 1, \"collapse\"], [\"data-toggle\", \"collapse\", \"data-target\", \"#payments-list\", 1, \"slight-margin\", \"btn-secondary\"], [\"id\", \"payments-list\", 1, \"collapse\"], [\"data-toggle\", \"collapse\", \"data-target\", \"#add-payment\", 1, \"slight-margin\", \"btn-secondary\"], [\"id\", \"add-payment\", 1, \"collapse\"], [\"data-toggle\", \"collapse\", \"data-target\", \"#address\", 1, \"btn-primary\", \"slight-margin\"], [\"id\", \"address\", 1, \"collapse\"], [\"data-toggle\", \"collapse\", \"data-target\", \"#address-list\", 1, \"slight-margin\", \"btn-secondary\"], [\"id\", \"address-list\", 1, \"collapse\"], [\"data-toggle\", \"collapse\", \"data-target\", \"#add-address\", 1, \"btn-secondary\", \"slight-margin\"], [\"id\", \"add-address\", 1, \"collapse\"]],\n    template: function SettingsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\", 2);\n        i0.ɵɵtext(3, \"Settings\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 3)(5, \"h3\");\n        i0.ɵɵtext(6, \"Payment Options and Address\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(7, \"hr\");\n        i0.ɵɵelementStart(8, \"button\", 4);\n        i0.ɵɵtext(9, \"Card Details \\u25BC\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(10, \"br\");\n        i0.ɵɵelementStart(11, \"div\", 5)(12, \"button\", 6);\n        i0.ɵɵtext(13, \" Payments List \\u25BC\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(14, \"br\");\n        i0.ɵɵelementStart(15, \"div\", 7);\n        i0.ɵɵelement(16, \"foodorb-payments\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"button\", 8);\n        i0.ɵɵtext(18, \" Add Payment \");\n        i0.ɵɵelementStart(19, \"b\");\n        i0.ɵɵtext(20, \"+\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(21, \"div\", 9);\n        i0.ɵɵelement(22, \"foodorb-add-payment\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelement(23, \"br\")(24, \"hr\")(25, \"br\");\n        i0.ɵɵelementStart(26, \"button\", 10);\n        i0.ɵɵtext(27, \"Address List \\u25BC\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"div\", 11)(29, \"button\", 12);\n        i0.ɵɵtext(30, \" Address List \\u25BC\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(31, \"br\");\n        i0.ɵɵelementStart(32, \"div\", 13);\n        i0.ɵɵelement(33, \"foodorb-address-list\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"button\", 14);\n        i0.ɵɵtext(35, \" Add Address \");\n        i0.ɵɵelementStart(36, \"b\");\n        i0.ɵɵtext(37, \"+\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(38, \"div\", 15);\n        i0.ɵɵelement(39, \"foodorb-add-address\");\n        i0.ɵɵelementEnd()()()()();\n      }\n    },\n    dependencies: [i3.AddressListComponent, i4.AddAddressComponent, i5.PaymentsComponent, i6.AddPaymentComponent]\n  });\n  return SettingsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}