{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"src/app/services/order.service\";\nimport * as i3 from \"@angular/common\";\nfunction OrderDetailsComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\");\n    i0.ɵɵtext(2, \"Order not found.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function OrderDetailsComponent_div_5_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.goBack());\n    });\n    i0.ɵɵtext(4, \"Back to Orders\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction OrderDetailsComponent_div_6_span_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate5(\" \", ctx_r4.order.address.name, \" - \", ctx_r4.order.address.address, \", \", ctx_r4.order.address.city, \", \", ctx_r4.order.address.state, \" \", ctx_r4.order.address.zip, \" \");\n  }\n}\nfunction OrderDetailsComponent_div_6_p_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\")(1, \"strong\");\n    i0.ɵɵtext(2, \"Payment:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r5.order.payment.name, \" ending in \", ctx_r5.order.payment.card.slice(-4), \" \");\n  }\n}\nfunction OrderDetailsComponent_div_6_tr_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 11)(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"titlecase\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"currency\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const item_r8 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 3, item_r8.foodName));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r8.restaurant);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 5, item_r8.price));\n  }\n}\nfunction OrderDetailsComponent_div_6_button_33_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function OrderDetailsComponent_div_6_button_33_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r9.confirmCancel());\n    });\n    i0.ɵɵtext(1, \" Cancel Order \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction OrderDetailsComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"h2\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\")(4, \"strong\");\n    i0.ɵɵtext(5, \"Status:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"span\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"titlecase\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"p\")(10, \"strong\");\n    i0.ɵɵtext(11, \"Delivery Address:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(12, OrderDetailsComponent_div_6_span_12_Template, 2, 5, \"span\", 4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(13, OrderDetailsComponent_div_6_p_13_Template, 4, 2, \"p\", 4);\n    i0.ɵɵelementStart(14, \"table\", 6)(15, \"thead\", 7)(16, \"tr\")(17, \"th\", 8);\n    i0.ɵɵtext(18, \"Item\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"th\", 8);\n    i0.ɵɵtext(20, \"Restaurant\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"th\", 8);\n    i0.ɵɵtext(22, \"Price\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(23, \"tbody\");\n    i0.ɵɵtemplate(24, OrderDetailsComponent_div_6_tr_24_Template, 9, 7, \"tr\", 9);\n    i0.ɵɵelementStart(25, \"tr\", 7)(26, \"th\");\n    i0.ɵɵtext(27, \"Total\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(28, \"td\");\n    i0.ɵɵelementStart(29, \"td\")(30, \"strong\");\n    i0.ɵɵtext(31);\n    i0.ɵɵpipe(32, \"currency\");\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵtemplate(33, OrderDetailsComponent_div_6_button_33_Template, 2, 0, \"button\", 10);\n    i0.ɵɵelementStart(34, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function OrderDetailsComponent_div_6_Template_button_click_34_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.goBack());\n    });\n    i0.ɵɵtext(35, \"Back to Orders\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Order #\", ctx_r1.order.id, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵclassMap(\"status-\" + ctx_r1.order.status);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 9, ctx_r1.order.status));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.order.address);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.order.payment);\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.order.items);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(32, 11, ctx_r1.order.total));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.order.status !== \"cancelled\" && ctx_r1.order.status !== \"delivered\");\n  }\n}\nexport let OrderDetailsComponent = /*#__PURE__*/(() => {\n  class OrderDetailsComponent {\n    constructor(route, router, orderService) {\n      this.route = route;\n      this.router = router;\n      this.orderService = orderService;\n    }\n    ngOnInit() {\n      const orderId = Number(this.route.snapshot.paramMap.get('order_id'));\n      this.order = this.orderService.getOrderById(orderId);\n    }\n    confirmCancel() {\n      if (!this.order) return;\n      if (confirm(`Are you sure you want to cancel Order #${this.order.id}?`)) {\n        this.cancelOrder();\n      }\n    }\n    cancelOrder() {\n      if (!this.order) return;\n      const success = this.orderService.cancelOrder(this.order.id);\n      if (success) {\n        alert('Your order has been cancelled.');\n        this.order.status = 'cancelled';\n      }\n    }\n    goBack() {\n      this.router.navigateByUrl('/orders');\n    }\n  }\n  OrderDetailsComponent.ɵfac = function OrderDetailsComponent_Factory(t) {\n    return new (t || OrderDetailsComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.OrderService));\n  };\n  OrderDetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: OrderDetailsComponent,\n    selectors: [[\"foodorb-order-details\"]],\n    decls: 7,\n    vars: 2,\n    consts: [[1, \"d-flex\", \"margin\", \"justify-content-center\"], [1, \"side-padding\", \"card\"], [1, \"card-header\", \"side-padding\"], [1, \"padding\", \"card-body\"], [4, \"ngIf\"], [1, \"btn-secondary\", 3, \"click\"], [1, \"table\"], [1, \"thead-dark\"], [\"scope\", \"col\"], [\"class\", \"data\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"slight-margin btn-cancel\", 3, \"click\", 4, \"ngIf\"], [1, \"data\"], [1, \"slight-margin\", \"btn-cancel\", 3, \"click\"]],\n    template: function OrderDetailsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h1\", 2);\n        i0.ɵɵtext(3, \"Order Details\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 3);\n        i0.ɵɵtemplate(5, OrderDetailsComponent_div_5_Template, 5, 0, \"div\", 4);\n        i0.ɵɵtemplate(6, OrderDetailsComponent_div_6_Template, 36, 13, \"div\", 4);\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngIf\", !ctx.order);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.order);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i3.TitleCasePipe, i3.CurrencyPipe]\n  });\n  return OrderDetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}